@model Web.ModelViews.IssueView
<script type="text/javascript">
    $.get('@Url.Action("LoadInfo", "WorkIssues", new { id = Model.Id })',
        function (data) {
            $('#Update-@Model.Id.ToString()').html(data);
        });
</script>

@if (Model.IsToday())
{
    <span class="badge badge-danger">Hôm nay</span>
}
@Html.ActionLink(Model.Title, "Details", "WorkIssues", new { id = Model.Id }, null)
<span class="badge badge-danger pull-right">@Model.Status</span>
<span class="badge badge-danger pull-right">@Model.End.Value.ToShortDateString()</span>
<span class="badge badge-success pull-right">@Model.End.Value.ToShortTimeString()</span>
<br />
@if (Model.IsVerified)
{
    <span class="material-icons">verified_user</span>
}
<span class="small">@Model.Price.ToReadable() (VND)</span>
<span class="small">@Model.IssueEstimation (phút)</span>
<hr />
<div id="Status-@Model.Id.ToString()" class="container"></div>

<p class="pull-right">
    @if (User.Identity.IsAuthenticated)
    {
        @Html.ActionLink("Edit", "Edit", "WorkIssues", new { id = Model.Id }, null)
        @Html.Raw(" | ")
        @Html.ActionLink("Delete", "Delete", "WorkIssues", new { id = Model.Id }, null)
        @Html.Raw(" | ")
        if (!Model.IsCompleted())
        {
            @Ajax.ActionLink("Done", "MarkStatus", "WorkIssues", new { id = Model.Id, status = "Done" },
                        new AjaxOptions
                        {
                            UpdateTargetId = "Status-" + Model.Id.ToString(),
                            HttpMethod = "Post",
                        }, null)
            @Html.Raw(" | ")

        }

        if (!Model.IsVerified)
        {
            @Ajax.ActionLink("Verify", "Verify", "WorkIssues", new { id = Model.Id },
                   new AjaxOptions
                   {
                       UpdateTargetId = "Status-" + Model.Id.ToString(),
                       HttpMethod = "Post",
                   }, null)
            @Html.Raw(" | ")
        }
        if (Model.IsCompleted())
        {
            @Ajax.ActionLink("Re-Open", "MarkStatus", "WorkIssues", new { id = Model.Id, status = "New" },
                     new AjaxOptions
                     {
                         UpdateTargetId = "Status-" + Model.Id.ToString(),
                         HttpMethod = "Post",
                     }, null)
            @Html.Raw(" | ")
        }
        @Ajax.ActionLink("+ 5 (min)", "AddTimeToDo", "WorkIssues", new { id = Model.Id, minutes = 5 },
                 new AjaxOptions
                 {
                     UpdateTargetId = "Status-" + Model.Id.ToString(),
                     HttpMethod = "Post",
                 }, null)

        @Ajax.ActionLink(" | Today", "SetWorkOnTime", "WorkIssues", new { id = Model.Id, date = DateTime.Now.ToString() },
                 new AjaxOptions
                 {
                     UpdateTargetId = "Status-" + Model.Id.ToString(),
                     HttpMethod = "Post",
                 }, null)
        @Ajax.ActionLink(" | Tomorrow", "SetWorkOnTime", "WorkIssues",
                     new { id = Model.Id, date = DateTime.Now.AddDays(1).ToString() },
                     new AjaxOptions
                     {
                         UpdateTargetId = "Status-" + Model.Id.ToString(),
                         HttpMethod = "Post",
                     }, null)
        @Ajax.ActionLink(" | Next week", "SetWorkOnTime", "WorkIssues",
                 new { id = Model.Id, date = DateTime.Now.AddDays(5).ToString() },
                 new AjaxOptions
                 {
                     UpdateTargetId = "Status-" + Model.Id.ToString(),
                     HttpMethod = "Post",
                 }, null)
    }
</p>
<div id="Update-@Model.Id.ToString()"></div>
